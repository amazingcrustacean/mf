option(noredefine);option(noloadLib);option(redSB);
LIB "blow.lib";
LIB "linkhom.lib";
LIB "matrix.lib";
LIB "control.lib";
int nx=2;
int ny=4;
ring rr=(0,q),(x(1..nx),y(1..ny)),dp; // Remove the q if you want to do computations
int N = 2; // The N in sl(N) link homology
printlevel = 1;
// TODO: I still don't understand what variables in our ring are doing in mfCompileWeb
// and why we need them here at all

// Define the underlying web of the trefoil
intvec edgevec(1) = 2,1,3,4;
intvec edgevec(2) = 4,3,5,6;
intvec edgevec(3) = 6,5,1,2;

// Define which vertices are overcrossings (+1) and which are undercrossings (-1):
intvec vertexParity = -1,-1,-1;

// Define the link as a list (see linkhom.lib preceding mfCompileLink)
list trefoilLink = vertexParity, list(edgevec(1),edgevec(2),edgevec(3));

mfCompileLink(trefoilLink, "trefoil-data", 1);

def invariant = KRlinkInvariant(trefoilLink, "trefoil-data", 1);
invariant;
// Should be q5 + q3 - q9 + q, but is not!