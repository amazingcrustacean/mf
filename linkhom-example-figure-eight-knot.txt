option(noredefine);option(noloadLib);option(redSB);
LIB "blow.lib";
LIB "linkhom.lib";
LIB "matrix.lib";
LIB "control.lib";
ring rr=(0,t,q),(x),dp;
int N = 2; // The N in sl(N) link homology
printlevel = 1;

// Define the underlying web of the figure-eight knot:
intvec edgevec(1) = 1,7,8,5;
intvec edgevec(2) = 6,8,7,2;
intvec edgevec(3) = 3,5,6,4;
intvec edgevec(4) = 4,2,1,3;

// Define which vertices are overcrossings (+1) and which are undercrossings (-1):
intvec vertexParity = 1,1,-1,-1;

// Define the link as a list (see linkhom.lib preceding mfCompileLink)
list figureEightLink = vertexParity, list(edgevec(1),edgevec(2),edgevec(3),edgevec(4));

// Compute the euler characteristic
list h = mfCompileLink(figureEightLink, "figure-eight-data-N2", 1, N);
list cp = KRcomplex(figureEightLink, h);
list cohom = computeCohomology(cp);
number euler = gradedEuler(cohom,q);
number poincare = gradedPoincare(cohom,q,t);

// The Jones polynomial of the figure eight knot is q5 + q^(-5), and
euler == q5 + q^(-5);

// The KR homology is therefore given by
poincare;